{
    "$schema": "https://json-schema.org/draft/2020-12/schema",
    "$id": "https://dpp-keystone.org/spec/validation/v1/json-schema/battery.schema.json",
    "title": "DPP for Batteries (Draft)",
    "description": "A conditional schema that applies if the DPP is for the battery sector, based on the draft Battery Regulation.",

    "if": {
        "type": "object",
        "properties": {
            "contentSpecificationIds": {
                "type": "array",
                "contains": {
                    "const": "draft_battery_specification_id"
                }
            }
        },
        "required": ["contentSpecificationIds"]
    },
    "then": {
        "type": "object",
        "properties": {
            "productName": { "type": "string" },
            "documents": { "type": "array" },
            "batteryCategory": { "type": "string" },
            "batteryChemistry": { "type": "string" },
            "dateOfManufacture": { "type": "string", "format": "date" },
            "nominalVoltage": { "type": "object" },
            "ratedCapacity": { "type": "object" },
            "recycledContentRatio": { "type": "number" },
            "carbonFootprint": { "type": "object" },
            "stateOfHealth": { "type": "object" }
        },
        "required": [
            "productName",
            "documents",
            "batteryCategory",
            "batteryChemistry",
            "dateOfManufacture",
            "nominalVoltage",
            "ratedCapacity",
            "recycledContentRatio",
            "carbonFootprint",
            "stateOfHealth"
        ]
    }
}
