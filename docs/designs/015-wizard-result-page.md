# Design Doc 015: Wizard HTML Result Page

## Goal
Transform the raw JSON output of the DPP Wizard into a tangible, visually appealing HTML "Product Page." This page serves as a proof-of-concept for how a Digital Product Passport could be rendered for an end-user, while also providing technical insights for developers via embedded adapter outputs.

## Motivation
- **"So What?" Factor:** Users filling out forms need to see a compelling result. A raw JSON dump is useful for developers but abstract for business stakeholders. A rendered page makes the value proposition immediate.
- **Adapter Showcase:** This feature naturally demonstrates the power of the `dpp-adapter`. By showing the "View Source" or "Developer Mode" of the generated page, we can reveal the `schema.org` and `GS1` structured data blocks that were automatically derived from the user's input.
- **Shareability:** An HTML page (even if just a client-side blob) feels like a "finished product" that can be screenshotted or demoed.

## User Experience (UX)

1.  **Generate Action:**
    *   The existing "Generate DPP" button in the Wizard remains.
    *   A new secondary primary action (or a step *after* generation) is introduced: "Preview Product Page."

2.  **The Result Page:**
    *   **Visual Layout:** A clean, modern product landing page.
        *   **Header:** Product Name, Manufacturer Logo (placeholder or uploaded), Basic ID information.
        *   **Hero Section:** Product Image (placeholder or uploaded URL), Key Specs (Carbon Footprint, Service Life).
        *   **Tabs/Sections:**
            *   *Overview:* Description, Dimensions, Weight.
            *   *Compliance:* CE marking, Declaration of Performance, Safety Data Sheets (links).
            *   *Sustainability:* EPD data (visualized as a chart or simple table), Recycled Content.
            *   *Traceability:* Map of manufacturing location (static image or link), Producer info.
    *   **Developer Toggle:** A prominent toggle switch or "Developer View" tab.
        *   When active, the page reveals the *data sources* for each section.
        *   Displays the embedded `<script type="application/ld+json">` blocks generated by the adapter (GS1, Schema.org).
        *   Shows the raw DPP JSON snippet responsible for specific rendered elements (e.g., hovering over the "Weight" highlights the `netWeight` field in the JSON view).

## Technical Architecture

1.  **Generator Logic (`src/lib/html-generator.js`):**
    *   Input: The full DPP JSON object generated by `dpp-generator.js`.
    *   Process:
        *   Run the `dpp-adapter` to generate the auxiliary JSON-LD blocks (Schema.org, GS1).
        *   Inject these blocks into a predefined HTML template string.
        *   Populate the visual HTML elements using the DPP JSON data.
    *   Output: A generic HTML string (or a Blob URL) that can be opened in a new tab.

2.  **Asset Handling:**
    *   **Images:** Since we don't have a backend to store user uploads, we will allow users to provide URLs for images (Product Image, Logo). If left blank, we use high-quality, generic SVG placeholders (e.g., a generic "Gear" icon, a "Factory" icon).
    *   **Styling:** Reuse `keystone-style.css` but add specific styles for the product page layout to ensure it looks distinct from the Wizard form itself.

3.  **Adapter Integration:**
    *   Reuse the existing `src/util/js/client/dpp-adapter.js`.
    *   Ensure the adapter supports the specific transformations needed for the "Developer View" (e.g., extracting just the `schema:Product` block).

## Implementation Plan

1.  **Design Template:** Create the HTML structure and CSS for the product page.
2.  **Implement Generator:** Write the JS logic to populate this template with DPP data.
3.  **Integrate Adapter:** Call the adapter to generate the structured data blocks and inject them.
4.  **UI Integration:** Add the "Preview" button to the Wizard and handle opening the generated page.
5.  **Refine "Developer Mode":** Add the interactive toggles to show/hide the technical details.

## Future Considerations
- **PDF Export:** Browser "Print to PDF" should work well with this clean HTML layout.
- **Hosting:** Ideally, this page could be "published" to IPFS or a temporary cloud store, but for the MVP, a client-side generated Blob URL is sufficient.
